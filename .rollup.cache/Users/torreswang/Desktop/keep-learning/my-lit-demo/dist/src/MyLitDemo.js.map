{"version":3,"file":"MyLitDemo.js","sourceRoot":"","sources":["../../src/MyLitDemo.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, PropertyValues } from \"lit\";\nimport { customElement, query } from \"lit/decorators.js\";\nimport { Graph, Dom, Node, Edge } from \"@antv/x6\";\nimport { DagreLayout } from \"@antv/layout\";\n\nconst MALE =\n  \"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*kUy8SrEDp6YAAAAAAAAAAAAAARQnAQ\";\nconst FEMALE =\n  \"https://gw.alipayobjects.com/mdn/rms_43231b/afts/img/A*f6hhT75YjkIAAAAAAAAAAAAAARQnAQ\";\n\n@customElement(\"my-lit-demo\")\nexport class MyLitDemo extends LitElement {\n  @query(\"#container\") container!: HTMLDivElement;\n\n  private graph?: Graph;\n  private layoutDir: \"LR\" | \"TB\" = \"LR\";\n\n  static styles = css`\n    :host {\n      display: block;\n      width: 100%;\n      height: 100vh;\n      overflow: hidden;\n    }\n    #container {\n      width: 100%;\n      height: 100%;\n      background-color: #f5f7fa;\n    }\n    .x6-node .btn {\n      cursor: pointer;\n      transition: opacity 0.2s;\n    }\n    .x6-node .btn:hover {\n      opacity: 0.8;\n    }\n  `;\n\n  protected firstUpdated(_changedProperties: PropertyValues): void {\n    this.initGraph();\n    this.loadInitialData();\n  }\n\n  private initGraph() {\n    try {\n      Graph.registerNode(\"org-node\", {\n        width: 260,\n        height: 88,\n        markup: [\n          { tagName: \"rect\", attrs: { class: \"card\" } },\n          { tagName: \"image\", attrs: { class: \"image\" } },\n          { tagName: \"text\", attrs: { class: \"rank\" } },\n          { tagName: \"text\", attrs: { class: \"name\" } },\n          {\n            tagName: \"g\",\n            attrs: { class: \"btn add\" },\n            children: [\n              { tagName: \"circle\", attrs: { class: \"add-circle\" } },\n              { tagName: \"text\", attrs: { class: \"add-icon\" } },\n            ],\n          },\n          {\n            tagName: \"g\",\n            attrs: { class: \"btn del\" },\n            children: [\n              { tagName: \"circle\", attrs: { class: \"del-circle\" } },\n              { tagName: \"text\", attrs: { class: \"del-icon\" } },\n            ],\n          },\n        ],\n        attrs: {\n          \".card\": {\n            rx: 10,\n            ry: 10,\n            refWidth: \"100%\",\n            refHeight: \"100%\",\n            fill: \"#5F95FF\",\n            stroke: \"#5F95FF\",\n          },\n          \".image\": { x: 16, y: 16, width: 56, height: 56 },\n          \".rank\": {\n            refX: 0.95,\n            refY: 0.35,\n            fill: \"#fff\",\n            fontSize: 12,\n            textAnchor: \"end\",\n          },\n          \".name\": {\n            refX: 0.95,\n            refY: 0.7,\n            fill: \"#fff\",\n            fontSize: 14,\n            fontWeight: \"600\",\n            textAnchor: \"end\",\n          },\n          \".btn.add\": { refDx: -16, refY: 16, event: \"node:add\" },\n          \".btn.del\": { refDx: -44, refY: 16, event: \"node:delete\" },\n          \".add-icon\": { fontSize: 18, fill: \"#fff\", x: -4.5, y: 6, text: \"+\" },\n          \".del-icon\": { fontSize: 22, fill: \"#fff\", x: -4, y: 5, text: \"-\" },\n        },\n      });\n      Graph.registerEdge(\"org-edge\", {\n        zIndex: -1,\n        attrs: {\n          line: { strokeWidth: 2, stroke: \"#A2B1C3\", targetMarker: null },\n        },\n      });\n    } catch (e) {\n      /* 忽略重复注册 */\n    }\n\n    this.graph = new Graph({\n      container: this.container,\n      autoResize: true,\n      background: { color: \"#f5f7fa\" },\n      interacting: false,\n      // scroller: { enabled: true, pannable: true }\n    });\n\n    this.graph.on(\"node:add\", ({ node }: { node: Node }) => {\n      const newNode = this.createNewNode(\n        \"New Hire\",\n        \"New Employee\",\n        Math.random() > 0.5 ? MALE : FEMALE\n      );\n      const newEdge = this.createNewEdge(node.id, newNode.id);\n      this.graph?.addCell([newNode, newEdge]);\n      this.runLayout();\n    });\n\n    this.graph.on(\"node:delete\", ({ node }: { node: Node }) => {\n      this.graph?.removeCell(node);\n      this.runLayout();\n    });\n  }\n\n  private async runLayout() {\n    if (!this.graph) return;\n\n    // 1. 准备原始数据对象\n    // 布局引擎会直接在这个 data 对象上进行“原地修改”\n    const data = {\n      nodes: this.graph.getNodes().map((node) => ({\n        id: node.id,\n        width: node.size().width,\n        height: node.size().height,\n        // 这里初始没有 x, y\n      })),\n      edges: this.graph.getEdges().map((edge) => ({\n        id: edge.id,\n        source: edge.getSourceCellId(),\n        target: edge.getTargetCellId(),\n      })),\n    };\n\n    // 2. 实例化布局\n    const dagreLayout = new DagreLayout({\n      rankdir: this.layoutDir,\n      nodesep: 40,\n      ranksep: 60,\n      nodeSize: (node: any) => [node.width, node.height],\n    });\n\n    // 3. 执行布局（注意：不要接收返回值）\n    // 执行完毕后，data.nodes 里的每个元素都会多出 x 和 y 属性\n    await dagreLayout.execute(data as any);\n\n    // 4. 将修改后的 data 应用回 X6\n    this.graph.batchUpdate(() => {\n      data.nodes.forEach((n: any) => {\n        const cell = this.graph?.getCellById(n.id) as Node;\n        if (cell && n.x !== undefined && n.y !== undefined) {\n          // 源码证明：n.x 和 n.y 是计算后的中心点\n          // 转换为 X6 所需的左上角坐标\n          cell.position(n.x - n.width / 2, n.y - n.height / 2);\n        }\n      });\n\n      this.graph?.getEdges().forEach((edge) => {\n        this.updateEdgeVertices(edge);\n      });\n    });\n\n    this.graph.zoomToFit({ padding: 40 });\n    this.graph.centerContent();\n  }\n\n  private updateEdgeVertices(edge: Edge) {\n    const source = edge.getSourceNode()!;\n    const target = edge.getTargetNode()!;\n    if (!source || !target) return;\n\n    const sBBox = source.getBBox();\n    const tBBox = target.getBBox();\n\n    if (this.layoutDir === \"LR\") {\n      if (Math.abs(sBBox.y - tBBox.y) > 1) {\n        const gap = tBBox.x - (sBBox.x + sBBox.width);\n        const x = sBBox.x + sBBox.width + gap / 2;\n        edge.setVertices([\n          { x, y: sBBox.center.y },\n          { x, y: tBBox.center.y },\n        ]);\n      } else {\n        edge.setVertices([]);\n      }\n    } else {\n      if (Math.abs(sBBox.x - tBBox.x) > 1) {\n        const gap = tBBox.y - (sBBox.y + sBBox.height);\n        const y = sBBox.y + sBBox.height + gap / 2;\n        edge.setVertices([\n          { x: sBBox.center.x, y },\n          { x: tBBox.center.x, y },\n        ]);\n      } else {\n        edge.setVertices([]);\n      }\n    }\n  }\n\n  private createNewNode(rank: string, name: string, image: string) {\n    return this.graph!.createNode({\n      shape: \"org-node\",\n      attrs: {\n        \".image\": { xlinkHref: image },\n        \".rank\": { text: Dom.breakText(rank, { width: 160, height: 45 }) },\n        \".name\": { text: Dom.breakText(name, { width: 160, height: 45 }) },\n      },\n    });\n  }\n\n  private createNewEdge(sourceId: string, targetId: string) {\n    return this.graph!.createEdge({\n      shape: \"org-edge\",\n      source: { cell: sourceId },\n      target: { cell: targetId },\n    });\n  }\n\n  private async loadInitialData() {\n    const nodes = [\n      this.createNewNode(\"Founder & Chairman\", \"Pierre Omidyar\", MALE),\n      this.createNewNode(\"President & CEO\", \"Margaret C. Whitman\", FEMALE),\n      this.createNewNode(\"President, PayPal\", \"Scott Thompson\", MALE),\n    ];\n    const edges = [\n      this.createNewEdge(nodes[0].id, nodes[1].id),\n      this.createNewEdge(nodes[1].id, nodes[2].id),\n    ];\n    this.graph?.resetCells([...nodes, ...edges]);\n    await this.runLayout();\n  }\n\n  render() {\n    return html`<div id=\"container\"></div>`;\n  }\n}\n"]}